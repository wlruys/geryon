# Resume and recover.
#
# When an experiment partially fails, geryon supports a single-command
# recovery workflow:
#
#   1. Launch the experiment (some configs may fail).
#   2. Check status to see what failed.
#   3. Use `recover --status failed` to select and retry failures.
#
# Equivalent explicit flow remains available via:
# `rerun --status failed` + `run-local --retry-file <path>`.
#
# This experiment uses flaky_app.py with a 30% failure rate.
# The launch script runs through the full recovery lifecycle.
#
# Run:
#   ./launch.sh

schema:
  version: 4

command:
  program: python3
  args:
    - ../flaky_app.py

select:
  packs:
    - name: experiment
      options:
        - id: exp_a
          params:
            experiment: a
            fail:
              mode: random
              rate: 0.3
        - id: exp_b
          params:
            experiment: b
            fail:
              mode: random
              rate: 0.3
        - id: exp_c
          params:
            experiment: c
            fail:
              mode: random
              rate: 0.3
    - name: seed
      options:
        - id: s1
          params:
            seed: 1
        - id: s2
          params:
            seed: 2
        - id: s3
          params:
            seed: 3
